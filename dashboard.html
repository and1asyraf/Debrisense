<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - DebriSense</title>
    <meta name="description" content="Interactive marine debris risk heatmap for Malaysia">
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- Custom CSS -->
    <link href="css/styles.css" rel="stylesheet">
    

</head>
<body>
    <div class="main-container">
        <!-- Navigation Placeholder -->
        <div id="navbar-placeholder"></div>
        
        <!-- Main Content -->
        <div class="content-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <!-- Filter Sidebar (Left Panel) -->
                    <div class="col-md-3">
                        <div class="filter-sidebar">
                            <!-- DebriSense Sidebar with Filters -->
                            <div class="sidebar">
                                <h5 class="mb-3">
                                    <i class="fas fa-filter me-2"></i>
                                    Filters
                                </h5>
                                
                                <!-- Season Filter -->
                                <div class="filter-group">
                                    <label class="form-label">Season</label>
                                    <div class="btn-group w-100" role="group">
                                        <input type="radio" class="btn-check" name="season" id="northeast" value="Northeast Monsoon" checked>
                                        <label class="btn btn-outline-primary" for="northeast">Northeast</label>
                                        
                                        <input type="radio" class="btn-check" name="season" id="southwest" value="Southwest Monsoon">
                                        <label class="btn btn-outline-primary" for="southwest">Southwest</label>
                                    </div>
                                </div>
                                
                                <!-- State Filter -->
                                <div class="filter-group">
                                    <label class="form-label">State</label>
                                    <select class="form-select" id="stateFilter" aria-label="Filter by state">
                                        <option value="">All States</option>
                                        <option value="Selangor">Selangor</option>
                                        <option value="Penang">Penang</option>
                                        <option value="Sabah">Sabah</option>
                                        <option value="Sarawak">Sarawak</option>
                                        <option value="Johor">Johor</option>
                                        <option value="Perak">Perak</option>
                                        <option value="Kedah">Kedah</option>
                                        <option value="Kelantan">Kelantan</option>
                                        <option value="Terengganu">Terengganu</option>
                                        <option value="Pahang">Pahang</option>
                                        <option value="Negeri Sembilan">Negeri Sembilan</option>
                                        <option value="Melaka">Melaka</option>
                                        <option value="Perlis">Perlis</option>
                                    </select>
                                </div>
                                
                                <!-- River Filter -->
                                <div class="filter-group">
                                    <label class="form-label">River</label>
                                    <select class="form-select" id="riverFilter" aria-label="Filter by river">
                                        <option value="">All Rivers</option>
                                        <option value="Sungai Klang">Sungai Klang</option>
                                        <option value="Sungai Pinang">Sungai Pinang</option>
                                        <option value="Sungai Petagas">Sungai Petagas</option>
                                        <option value="Sungai Johor">Sungai Johor</option>
                                        <option value="Sungai Linggi">Sungai Linggi</option>
                                        <option value="Sungai Muar">Sungai Muar</option>
                                        <option value="Sungai Pahang">Sungai Pahang</option>
                                        <option value="Sungai Perak">Sungai Perak</option>
                                        <option value="Sungai Muda">Sungai Muda</option>
                                        <option value="Sungai Kelantan">Sungai Kelantan</option>
                                        <option value="Sungai Terengganu">Sungai Terengganu</option>
                                    </select>
                                </div>
                                
                                <!-- Pollution Type Filter -->
                                <div class="filter-group">
                                    <label class="form-label">Pollution Type</label>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Plastic Bottles" id="plasticBottles" checked>
                                        <label class="form-check-label" for="plasticBottles">
                                            Plastic Bottles
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Plastic Bags" id="plasticBags" checked>
                                        <label class="form-check-label" for="plasticBags">
                                            Plastic Bags
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Food Wrappers" id="foodWrappers" checked>
                                        <label class="form-check-label" for="foodWrappers">
                                            Food Wrappers
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Straws" id="straws" checked>
                                        <label class="form-check-label" for="straws">
                                            Straws
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Cigarette Butts" id="cigaretteButts" checked>
                                        <label class="form-check-label" for="cigaretteButts">
                                            Cigarette Butts
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Fishing Gear" id="fishingGear" checked>
                                        <label class="form-check-label" for="fishingGear">
                                            Fishing Gear
                                        </label>
                                    </div>
                                </div>
                                
                                <!-- Apply Filters Button -->
                                <div class="filter-group">
                                    <button class="btn btn-primary w-100 btn-apply-filters" id="applyFiltersBtn" onclick="applyFilters()">
                                        <i class="fas fa-filter me-2"></i>
                                        Apply Filters
                                    </button>
                                </div>
                                
                                <!-- Clear Filters Button -->
                                <div class="filter-group">
                                    <button class="btn btn-outline-secondary w-100" onclick="clearFilters()">
                                        <i class="fas fa-times me-2"></i>
                                        Clear Filters
                                    </button>
                                </div>
                                
                                <hr class="my-4">
                                
                                <!-- Quick Stats -->
                                <h6 class="mb-3">
                                    <i class="fas fa-chart-pie me-2"></i>
                                    Quick Stats
                                </h6>
                                
                                <div class="stats-card">
                                    <div class="stats-number" id="totalReports">0</div>
                                    <div class="stats-label">Total Reports</div>
                                </div>
                                
                                <div class="stats-card">
                                    <div class="stats-number" id="avgRiskScore">0.0</div>
                                    <div class="stats-label">Avg Risk Score</div>
                                </div>
                                
                                <div class="stats-card">
                                    <div class="stats-number" id="highRiskZones">0</div>
                                    <div class="stats-label">High Risk Zones</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Map View (Right Panel) -->
                    <div class="col-md-9">
                        <!-- Map Header -->
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <div>
                                <h4 class="mb-1">
                                    <i class="fas fa-map-marker-alt me-2"></i>
                                    River Pollution Risk Map
                                </h4>
                                <p class="text-muted mb-0" id="mapDescription">
                                    Interactive map showing river locations with pollution risk insights. Click on markers for detailed information.
                                </p>
                            </div>
                            <div class="d-flex gap-2">
                                <button class="btn btn-outline-primary" onclick="exportMapData()">
                                    <i class="fas fa-download me-2"></i>
                                    Export
                                </button>
                                <button class="btn btn-primary" onclick="showMapLegend()">
                                    <i class="fas fa-info-circle me-2"></i>
                                    Legend
                                </button>
                            </div>
                        </div>
                        
                        <!-- Map Container -->
                        <div class="card">
                            <div class="card-body p-0">
                                <div id="map" class="leaflet-map">
                                    <div class="map-placeholder">
                                        <div class="text-center">
                                            <i class="fas fa-map-marker-alt fa-3x mb-3"></i>
                                            <p>Loading river location map...</p>
                                            <small class="text-muted">Markers show river locations with risk levels</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Map Legend -->
                        <div class="row mt-3">
                            <div class="col-md-8">
                                <div class="card">
                                    <div class="card-header">
                                        <h6 class="mb-0">
                                            <i class="fas fa-map-marker-alt me-2"></i>
                                            Risk Legend
                                        </h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="d-flex align-items-center mb-2">
                                                    <i class="fas fa-check-circle me-2 legend-icon-low"></i>
                                                    <span>Low Risk (0.0 - 0.3)</span>
                                                </div>
                                                <small class="text-muted">Minimal pollution risk</small>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="d-flex align-items-center mb-2">
                                                    <i class="fas fa-exclamation-circle me-2 legend-icon-moderate"></i>
                                                    <span>Moderate Risk (0.31 - 0.6)</span>
                                                </div>
                                                <small class="text-muted">Medium pollution risk</small>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="d-flex align-items-center mb-2">
                                                    <i class="fas fa-exclamation-triangle me-2 legend-icon-high"></i>
                                                    <span>High Risk (0.61 - 1.0)</span>
                                                </div>
                                                <small class="text-muted">High pollution risk</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h6 class="mb-0">
                                            <i class="fas fa-clock me-2"></i>
                                            Last Updated
                                        </h6>
                                    </div>
                                    <div class="card-body">
                                        <p class="mb-1">
                                            <strong>Predictions:</strong> 
                                            <span id="lastUpdated">2024-10-15 10:30 AM</span>
                                        </p>
                                        <p class="mb-1">
                                            <strong>Season:</strong> 
                                            <span id="currentSeason">Northeast Monsoon</span>
                                        </p>
                                        <p class="mb-0">
                                            <strong>Data Points:</strong> 
                                            <span id="dataPoints">50 zones</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer Placeholder -->
        <div id="footer-placeholder"></div>
    </div>
    
    <!-- Region Details Modal -->
    <div class="modal fade" id="regionDetailsModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-map-marker-alt me-2"></i>
                        Region Details
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close modal"></button>
                </div>
                <div class="modal-body" id="regionDetailsContent">
                    <!-- Content will be populated dynamically -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" onclick="viewRegionInsights()">
                        <i class="fas fa-chart-line me-2"></i>
                        View Insights
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- River Insights Modal -->
    <div class="modal fade" id="riverInsightsModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-water me-2"></i>
                        <span id="riverModalTitle">River Insights</span>
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close modal"></button>
                </div>
                <div class="modal-body" id="riverInsightsContent">
                    <!-- Content will be populated dynamically -->
                </div>
                <div class="modal-footer">
                    <div class="d-flex justify-content-between w-100">
                        <div>
                            <button type="button" class="btn btn-outline-secondary" onclick="showChartOptions()">
                                <i class="fas fa-chart-bar me-2"></i>
                                View Charts
                            </button>
                        </div>
                        <div>
                            <button type="button" class="btn btn-outline-primary" onclick="exportRiverData()">
                                <i class="fas fa-download me-2"></i>
                                Export Data
                            </button>
                            <button type="button" class="btn btn-outline-info" onclick="viewPastReports()">
                                <i class="fas fa-history me-2"></i>
                                Past Reports
                            </button>
                            <button type="button" class="btn btn-success" onclick="addNewReport()">
                                <i class="fas fa-plus me-2"></i>
                                Add Report
                            </button>
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Chart Options Modal -->
    <div class="modal fade" id="chartOptionsModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-chart-bar me-2"></i>
                        Choose Chart Type
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="chart-option-card" onclick="showPollutionBarChart()">
                                <div class="chart-icon">
                                    <i class="fas fa-chart-bar"></i>
                                </div>
                                <h6>Pollution Types</h6>
                                <p class="text-muted">Bar chart showing different pollution types found</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="chart-option-card" onclick="showRiskLineChart()">
                                <div class="chart-icon">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <h6>Risk History</h6>
                                <p class="text-muted">Line chart showing risk score trends over time</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="chart-option-card" onclick="showDataPieChart()">
                                <div class="chart-icon">
                                    <i class="fas fa-chart-pie"></i>
                                </div>
                                <h6>Data Distribution</h6>
                                <p class="text-muted">Pie chart showing data distribution</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Chart Display Modal -->
    <div class="modal fade" id="chartDisplayModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="chartModalTitle">
                        <i class="fas fa-chart-bar me-2"></i>
                        Chart Title
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close modal"></button>
                </div>
                <div class="modal-body">
                    <canvas id="chartCanvas" width="400" height="200"></canvas>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add Report Modal -->
    <div class="modal fade" id="addReportModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-plus me-2"></i>
                        Add Cleanup Report
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addReportForm">
                        <div class="mb-3">
                            <label class="form-label">River</label>
                            <input type="text" class="form-control" id="reportRiver" readonly title="Selected river for the report">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Location</label>
                            <input type="text" class="form-control" id="reportLocation" placeholder="Specific location" title="Enter the specific location where cleanup was performed">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Date</label>
                            <input type="date" class="form-control" id="reportDate" required title="Select the date when the cleanup was performed">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Plastic Items Found</label>
                            <div class="row">
                                <div class="col-md-6">
                                    <input type="number" class="form-control" id="plasticBottles" placeholder="Plastic bottles" min="0">
                                </div>
                                <div class="col-md-6">
                                    <input type="number" class="form-control" id="plasticBags" placeholder="Plastic bags" min="0">
                                </div>
                            </div>
                            <div class="row mt-2">
                                <div class="col-md-6">
                                    <input type="number" class="form-control" id="foodWrappers" placeholder="Food wrappers" min="0">
                                </div>
                                <div class="col-md-6">
                                    <input type="number" class="form-control" id="straws" placeholder="Straws" min="0">
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Team/Organization</label>
                            <input type="text" class="form-control" id="reportTeam" placeholder="Your team or organization">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Notes</label>
                            <textarea class="form-control" id="reportNotes" rows="3" placeholder="Additional observations"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-success" onclick="submitReport()">
                        <i class="fas fa-save me-2"></i>
                        Submit Report
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Leaflet.js -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- Leaflet Heatmap Plugin (load after Leaflet) -->
    <script src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>
    
    <!-- Custom Scripts -->
    <script src="data/mock-data.js"></script>
    <script src="js/main.js"></script>
    <script src="js/filters.js"></script>
    <script src="js/dashboard.js"></script>
</body>
</html> 